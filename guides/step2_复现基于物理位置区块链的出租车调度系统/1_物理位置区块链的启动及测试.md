### 物理位置区块链的启动及测试
> `geth1.9.12`或`geth1`的大部分行为和`geth`类似，若无明显不同笔者将不在此进行赘述，详细请参考`step1_官方版本以太坊的使用`
#### 确认环境
```
Ubuntu：22.04.2 LTS
geth1.9.12：1.9.12-stable
geth1：
    Version: 1.9.12-stable
    Git Commit: 27356db60e570e51169f6c763ff14eb41abc9e56
    Git Commit Date: 20210721
    Architecture: amd64
    Protocol Versions: [65 64 63]
    Go Version: go1.13.9
    Operating System: linux
```
#### 物理位置区块链概述
#### 1.9.12版本以太坊的节点启动
- 在任意位置新建`geth1.9.12_test/`（文件夹名根据个人情况而定）用于存放区块链相关数据，并进入该文件目录以该目录为工作区。
- 把geth1.9.12复制一份到当前文件夹方便操作，然后执行命令新建两个密码为`123456`的账户：
    ```
    > ./geth1.9.12 --datadir data1 account new       //0xc19DA0e6af14eF669E24003E8a9ae01797e424Aa
    > ./geth1.9.12 --datadir data1 account new       //0xd037DBF78fdff5C6045CED3DAeA6Ff4ECBE7C4Ba
    ```

    注意事项：
    - 若文件无法执行可以用`sudo chmod +x <文件>`为其添加执行权限

- 在工作区中新建创世配置文件[genesis.json](../../src/genesis_for_init_geth1.9.12_node/genesis.json)，文件内容如下：
    ```
    {
        "config": {
            "chainId": 12345,
            "homesteadBlock": 0,
            "eip150Block": 0,
            "eip155Block": 0,
            "eip158Block": 0,
            "byzantiumBlock": 0,
            "constantinopleBlock": 0,
            "petersburgBlock": 0,
            "istanbulBlock": 0,
            "ethash": {}
        },
        "difficulty": "1100000",
        "gasLimit": "8000000",
        "alloc字段的注释，geth在初始化时会忽略此字段": "将alloc中用户地址设置为刚刚生成的新用户的地址",
        "alloc": {
            "0xc19DA0e6af14eF669E24003E8a9ae01797e424Aa": { "balance":"500000000000000000000" },
            "0xd037DBF78fdff5C6045CED3DAeA6Ff4ECBE7C4Ba": { "balance":"400000000000000000000" }
        }
    }
    ```

    观察可以发现：
    - `difficulty`字段被设置成了之前在`step1_官方版本以太坊的使用`中难度自动调整到的1100000

- 使用创世配置文件进行创世
    ```
    > ./geth1.9.12 --datadir data1/ init genesis.json
    ```
- 启动私有链的第一个节点
    ```
    > ./geth1.9.12 --identity "geth1.9.12_test_node1" --networkid 11500 --datadir data1 --rpc --rpcaddr "127.0.0.1" --rpcport "8545" --rpcapi "eth,net,personal,web3" --rpccorsdomain "*" --port 30303 --maxpeers 3 --nodiscover --allow-insecure-unlock --dev.period 1 --syncmode full --verbosity 6 console 2>> geth1.9.12_node1_output.log
    ```

    观察可以发现：
    - 老版本以太坊使用`--rpc`表示HTTP-RPC服务而不是新版本中的`--http`
    - 相比于新版没有`--authrpc`服务故无需此参数
    - 老版本可以正常使用`personal`API故不需要`--rpc.enabledeprecatedpersonal`参数
    - 若无特殊说明后续操作默认在物理位置区块链上进行，启动该版本的以太坊节点仅仅为了观察二者的某些异同，加深理解
#### 物理位置区块链的节点启动
- 在任意位置新建`geth1_test/`（文件夹名根据个人情况而定）用于存放区块链相关数据，并进入该文件目录以该目录为工作区。
- 把geth1复制一份到当前文件夹方便操作，然后执行命令新建两个密码为`123456`的账户：
    ```
    > ./geth1 --datadir data1 account new       //0x14aFcb6F973d7536E0F6546E2EAf07809d7fbB1D
    > ./geth1 --datadir data1 account new       //0x00DA7F80Cf9a6711d023942B77FcE0aC92770b7B
    ```
- 在工作区中新建创世配置文件[genesis.json](../../src/genesis_for_init_geth1_node/genesis.json)，文件内容如下：
    ```
    {
        "config": {
            "chainId": 12345,
            "homesteadBlock": 0,
            "eip150Block": 0,
            "eip155Block": 0,
            "eip158Block": 0,
            "byzantiumBlock": 0,
            "constantinopleBlock": 0,
            "petersburgBlock": 0,
            "istanbulBlock": 0,
            "ethash": {}
        },
        "difficulty": "1100000",
        "gasLimit": "8000000",
        "alloc字段的注释，geth在初始化时会忽略此字段": "将alloc中用户地址设置为刚刚生成的新用户的地址",
        "alloc": {
        "0x14aFcb6F973d7536E0F6546E2EAf07809d7fbB1D": {
            "balance":"500000000000000000000",
            "position":"test0123456789",
            "txtime":1
        },
        "0x00DA7F80Cf9a6711d023942B77FcE0aC92770b7B": {
            "balance":"400000000000000000000",
            "position":"test1123456789",
            "txtime":2
        }
        }
    }
    ```

    观察可以发现：
    - 多了……（待补充）

- 使用创世配置文件进行创世
    ```
    > ./geth1 --datadir data1/ init genesis.json
    ```
- 启动私有链的第一个节点
    ```
    > ./geth1 --identity "geth1_test_node1" --networkid 11600 --datadir data1 --rpc --rpcaddr "127.0.0.1" --rpcport "8546" --rpcapi "eth,net,personal,web3" --rpccorsdomain "*" --port 30304 --maxpeers 3 --nodiscover --allow-insecure-unlock --dev.period 1 --syncmode full --verbosity 6 console 2>> geth1_node1_output.log
    ```

    注意事项：
    - `--networkid`更换成11600为了区别geth1.9.12形成的网络（非必须）
    - `--rpcport`和`--port`更换，避免和本机上的geth1.9.12冲突
#### 节点基本操作
- 查看账户余额及当前位置
    ```
    > eth.accounts
    > eth.getBalance(eth.accounts[0])
    > eth.getPosition(eth.accounts[0])
    ```
- 查看节点创世区块信息
    ```
    > eth.blockNumber
    > eth.getBlock(0)
    ```

    观察可以发现：
    - geth1相比于geth1.9.12，区块多了一些字段
        - `blockType`
        - `firestBB`
        - `parallelHash`
        - `regionId`
        - `regionRoot`
#### 多节点的加入